<!doctype html>
<!--[if lt IE 7 ]> <html lang="en" class="no-js ie6"> <![endif]-->
<!--[if IE 7 ]>    <html lang="en" class="no-js ie7"> <![endif]-->
<!--[if IE 8 ]>    <html lang="en" class="no-js ie8"> <![endif]-->
<!--[if (gte IE 9)|!(IE)]><!--> <html lang="en" class="no-js"> <!--<![endif]-->
<head>
    <meta charset="UTF-8">
  <meta http-equiv="Content-type" content="text/html;charset=UTF-8">
  <meta name="description" content="">
  <meta name="author" content="Marcus Nitzschke">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>Marcus Nitzschke - MongoDB as RDF triple store based on Node.js</title>
    <link rel="shortcut icon" href="/media/favicon.ico">
  
    <link href='http://fonts.googleapis.com/css?family=VT323' rel='stylesheet'  type='text/css' />
  <link rel="stylesheet" href="/media/css/syntax.css"/>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/twitter-bootstrap/2.3.2/css/bootstrap-combined.min.css"/>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css"/>
  <link rel="stylesheet" href="/media/css/site.css"/>
  
    <script src="/media/js/libs/modernizr-1.7.min.js"></script>
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/twitter-bootstrap/2.3.2/js/bootstrap.min.js"></script>
            <!-- Grab Google CDN's jQuery, with a protocol relative URL; fall back to local if necessary -->
  
  <script src="http://www.kendix.org/media/js/libs/jquery.fancybox-1.3.4.pack.js" type="text/javascript"></script>
<link rel="stylesheet" type="text/css" href="http://www.kendix.org/media/css/jquery.fancybox-1.3.4.css">
<script type="text/javascript">
$(document).ready(function(){
  $("a.fancy").fancybox({
  });
});
</script>

  
  </head>
  <body id="mongodb-as-rdf-triple-store">
    <header class="clearfix">
                        <nav class="navbar navbar-fixed-top navbar-inverse">
  <div class="navbar-inner">
  <div class="container">
    <!--<a class="brand" href="/"><span style="color:#A64116;">Hello</span> <span style="color:#A68916;">World.</span></a>-->
    <ul class="nav">
              <li class="">
            
	    <a title="Home Page"
                href="/"><i class="fa fa-home"></i>
                home
            </a>
        </li>        <li class="active">
            
	    <a title="Blog"
                href="/blog"><i class="fa fa-pencil"></i>
                blog
            </a>
        </li>    </ul>
    </div> 
  </div>
</nav>
          </header>

    <div class="container" id="container">
                <section class="content">
          <article class="post">

<nav class="post_nav">
<a class="prev disabled"
    title=""
    >
    Previous
</a>

<a class="next disabled"
    title=""
    >
    Next
</a>
</nav>
<h3 class="title">
    <a href="/blog/mongodb-as-rdf-triple-store.htm">
        MongoDB as RDF triple store based on Node.js
    </a>
</h3>

<time datetime="2011-09-23">
    Posted: Fri, 23 Sep 2011
</time>

<ul class="tags clear">
<li>
    <a class="small"><!-- href="/blog/tags/MongoDB">-->
        MongoDB
    </a>
</li>
<li>
    <a class="small"><!-- href="/blog/tags/Nodejs">-->
        Nodejs
    </a>
</li>
<li>
    <a class="small"><!-- href="/blog/tags/RDF">-->
        RDF
    </a>
</li>
</ul>
<img style="float:right;padding-left:5px;" src="http://kendix.org/media/images/13.png" />
<p>This is a short summary of my <a href="/media/files/thesis.pdf">bachelor thesis</a> that was written in German. Maybe someone else is interested in the&nbsp;results.</p>
<h4>About</h4>
<p>The topic of the thesis was “Implementing a <span class="caps">RDF</span> storage solution for <a href="http://mongodb.org/">MongoDB</a>”. Besides this implementation part the performance of the written <span class="caps">API</span> was compared to <a href="http://www.openlinksw.com/dataspace/dav/wiki/Main/">Virtuoso Open-Source</a>.</p>
<p>So, to summarize this thesis, the main question is “Could MongoDB be an alternative to Virtuoso as triple&nbsp;store?”.</p>
<h4>Implementation</h4>
<p>There was prior work on this topic such as <a href="http://wwaites.posterous.com/mongo-as-an-rdf-store">this</a> or <a href="http://www.dotnetrdf.org/blogitem.asp?blogID=35">that</a> but no scientific evaluation of the systems.
You can find the written <span class="caps">API</span> for <a href="http://nodejs.org/">Node.js</a> <a href="https://github.com/kenda/node_mongo_rdf">here</a>. It mainly implements an insert method and some query methods. For details take a look at the <span class="caps">README</span>. There are also explanations about the <span class="caps">URI</span> transformation methods that avoids dots in the key identifier of the <span class="caps">JSON</span>&nbsp;objects.</p>
<h4>Evaluation</h4>
<p>A short explanation of the systems and the data&nbsp;sets.</p>
<h5>systems</h5>
<p><em>nested</em> a.k.a <em>flat</em>: MongoDB implementation with the nested uri&nbsp;transformation</p>
<p><em>dict</em>: MongoDB implementation with the dict uri&nbsp;transformation</p>
<p><em>virtNative</em>: Virtuoso via <span class="caps">ODBC</span>&nbsp;interface</p>
<p><em>virtHttp</em>: Virtuoso via <span class="caps">HTTP</span></p>
<h5>data&nbsp;sets</h5>
<p><table class="table table-condensed table-striped table-bordered">
  <tbody><tr>
      <th>abbr. </th>
      <th>subjects </th>
      <th>triples </th>
    </tr>
    <tr>
      <td>2k</td>
      <td>2056</td>
      <td>10698</td>
    </tr>
    <tr>
      <td>5k</td>
      <td>5464</td>
      <td>29446</td>
    </tr>
    <tr>
      <td>10k</td>
      <td>9830</td>
      <td>59431</td>
    </tr>
    <tr>
      <td>20k</td>
      <td>19583</td>
      <td>110431</td>
    </tr>
    <tr>
      <td>40k</td>
      <td>41901</td>
      <td>238965</td>
    </tr>
  </tbody>
</table></p>
<h6>Insert</h6>
<p><a href="http://www.kendix.org/media/images/11.png" class="fancy"><img src="http://www.kendix.org/media/images/11.png" class="fancy" alt="Insert results" /></a></p>
<table class="table table-condensed table-striped table-bordered">
  <tbody><tr>
      <th></th>
      <th>nested </th>
      <th>dict </th>
      <th>virtNative </th>
      <th>virtHttp</th>
    </tr>
    <tr>
      <td>2k</td>
      <td> 1.609s</td>
      <td> 10.031s</td>
      <td> 0.512s</td>
      <td> 1.415s</td>
    </tr>
    <tr>
      <td>5k</td>
      <td> 7.811s</td>
      <td> 30.522s</td>
      <td> 1.300s</td>
      <td> 3.163s</td>
    </tr>
    <tr>
      <td>10k</td>
      <td> 23.148s</td>
      <td> 83.707s</td>
      <td> 2.697s</td>
      <td> 6.368s</td>
    </tr>
    <tr>
      <td>20k</td>
      <td> 176.297s</td>
      <td> 251.442s</td>
      <td> 5.674s</td>
      <td> 13.605s</td>
    </tr>
    <tr>
      <td>40k</td>
      <td> 733.773s</td>
      <td> 998.763s</td>
      <td> 15.153s</td>
      <td> 42.731s</td>
    </tr>
  </tbody>
</table>

<p>As you can see, both MongoDB implementations are extremely slow inserting the triples. There are differences of 15 minutes and more! But it’s hard to say what the reasons for this results are. Because of the <a href="http://www.dotnetrdf.org/blogitem.asp?blogID=35">mentioned</a> article which presents similar results, we can only guess that MongoDB itself is the reason and not the implementations. Maybe it has something to do with updating the&nbsp;indices.</p>
<h6>Query</h6>
<p><a href="http://www.kendix.org/media/images/12.png" class="fancy"><img src="http://www.kendix.org/media/images/12.png" alt="Query results" /></a>
<table class="table table-condensed table-striped table-bordered">
  <tbody><tr>
      <th></th>
      <th>nested </th>
      <th>dict </th>
      <th>virtNative </th>
      <th>virtHttp</th>
    </tr>
    <tr>
      <td>2k</td>
      <td> 0.0115s</td>
      <td> 0.1095s</td>
      <td> 0.0025s</td>
      <td> 0.0325s</td>
    </tr>
    <tr>
      <td>5k</td>
      <td> 0.0120s</td>
      <td> 0.2485s</td>
      <td> 0.0030s</td>
      <td> 0.0325s</td>
    </tr>
    <tr>
      <td>10k</td>
      <td> 0.0120s</td>
      <td> 0.4680s</td>
      <td> 0.0030s</td>
      <td> 0.0320s</td>
    </tr>
    <tr>
      <td>20k</td>
      <td> 0.0110s</td>
      <td> 0.8550s</td>
      <td> 0.0030s</td>
      <td> 0.0320s</td>
    </tr>
    <tr>
      <td>40k</td>
      <td> 0.0100s</td>
      <td> 2.0470s</td>
      <td> 0.0010s</td>
      <td> 0.0220s</td>
    </tr>
  </tbody>
</table></p>
<p>The results of the probably most used query method findBySubject() are quite better than the insert ones. While Virtuoso via <span class="caps">ODBC</span> is the fastest implementation, the MongoDB implementation nested is faster than Virtuoso via <span class="caps">HTTP</span>. The second MongoDB implementation is continously the slowest&nbsp;system.</p>
<p>For the results of the other query methods, please take a look in the&nbsp;thesis.</p>
<h4>Conclusion</h4>
<ol>
<li>The implementation dict is continously the slowest&nbsp;one.</li>
<li>The implementation nested is in four of five query methods faster than Virtuoso via <span class="caps">HTTP</span></li>
<li>Virtuoso via <span class="caps">ODBC</span> is continously the fastest&nbsp;system.</li>
</ol>
<p>Overall: With the results in mind, we can draw the conclusion that MongoDB as a triple store is only useful with small to mid sized data sets. Furthermore it is advisable to use it only in query-oriented environments because of the lacking performance inserting&nbsp;triples.</p></article>
<br/>
<!-- AddThis Button BEGIN -->
<div class="addthis_toolbox addthis_default_style ">
<a class="addthis_button_facebook_like" fb:like:layout="button_count"></a>
<a class="addthis_button_tweet" tw:via="adn3k"></a>
<a class="addthis_button_google_plusone" g:plusone:size="medium"></a>
<a class="addthis_counter addthis_pill_style"></a>
</div>
<script type="text/javascript" src="http://s7.addthis.com/js/250/addthis_widget.js#pubid=xa-4e7f672c4d4f3292"></script>
<!-- AddThis Button END -->

<div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_shortname = 'kendix';
    var disqus_identifier = "MongoDB as RDF triple store based on Node.js";
    var disqus_url = "http://kendix.org/blog/mongodb-as-rdf-triple-store.htm";
    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>          </section>
      </div> <!--! end of #container -->
  
  <footer>
    <span id="cc">
      <a rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/">
	<img src="/media/images/cc.png" alt="Creative Commons Lizenzvertrag" title="all content under CC BY-SA" width="48" height="48" />
      </a>
    </span>
    <span id ="atom">
      <a href="/blog/atom.xml" title="Atom Feed">
	<img src="/media/images/atom.png" alt="Atom feed" title="Atom feed" width="48" height="47" />
      </a>
    </span>
  </footer>
</body>
</html>